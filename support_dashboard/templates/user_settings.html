{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Account Settings UI Design</title>
    <meta
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
      name="viewport"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'account_settings/css/style.css' %}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>

  <body>
    <section class="py-5 my-5">
      <div class="container">
        <a href="{% url 'home' %}" class="btn btn-light back-button">
          <i class="fa fa-arrow-left"></i>
        </a>
        <span class="button-text">Account Settings</span>

        <div class="bg-white shadow rounded-lg d-block d-sm-flex">
          <div class="profile-tab-nav border-right">
            <div class="p-4">
              <div class="img-circle text-center mb-3">
                <img
                  src="{% static 'account_settings/img/user2.jpg' %}"
                  alt="Image"
                  class="shadow"
                />
              </div>

              {% if user.is_authenticated %}
              <h4 class="text-center">{{user.username}}</h4>
              {% else %}
              <h4 class="text-center">Me</h4>
              {% endif %}
            </div>
            <div
              class="nav flex-column nav-pills"
              id="v-pills-tab"
              role="tablist"
              aria-orientation="vertical"
            >
              <a
                class="nav-link active"
                id="account-tab"
                data-toggle="pill"
                href="#account"
                role="tab"
                aria-controls="account"
                aria-selected="true"
              >
                <i class="fa fa-home text-center mr-1"></i>
                Account
              </a>
              <a
                class="nav-link"
                id="password-tab"
                data-toggle="pill"
                href="#password"
                role="tab"
                aria-controls="password"
                aria-selected="false"
              >
                <i class="fa fa-key text-center mr-1"></i>
                Password
              </a>
              <a
                class="nav-link"
                id="security-tab"
                data-toggle="pill"
                href="#security"
                role="tab"
                aria-controls="security"
                aria-selected="false"
              >
                <i class="fa fa-user text-center mr-1"></i>
                Automation Credentials
              </a>
              <a
                class="nav-link"
                id="application-tab"
                data-toggle="pill"
                href="#application"
                role="tab"
                aria-controls="application"
                aria-selected="false"
              >
                <i class="fa fa-tv text-center mr-1"></i>
                Application
              </a>
              <a
                class="nav-link"
                id="notification-tab"
                data-toggle="pill"
                href="#notification"
                role="tab"
                aria-controls="notification"
                aria-selected="false"
              >
                <i class="fa fa-bell text-center mr-1"></i>
                Notification
              </a>
            </div>
          </div>
          <div class="tab-content p-4 p-md-5" id="v-pills-tabContent">
            <div
              class="tab-pane fade show active"
              id="account"
              role="tabpanel"
              aria-labelledby="account-tab"
            >
              <h3 class="mb-4">Account Settings(dummy)</h3>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>First Name</label>
                    <input type="text" class="form-control" value="Kamlesh" />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" class="form-control" value="Chhipa" />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Email</label>
                    <input
                      type="text"
                      class="form-control"
                      value="kamlesh_test@gmail.com"
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Phone number</label>
                    <input
                      type="text"
                      class="form-control"
                      value="+91 8432386605"
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Company</label>
                    <input
                      type="text"
                      class="form-control"
                      value="Kamlesh Workspace"
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Designation</label>
                    <input type="text" class="form-control" value="Developer" />
                  </div>
                </div>
              </div>
              <div>
                <button class="btn btn-primary">Update</button>
                <button class="btn btn-light">Cancel</button>
              </div>
            </div>
            <div
              class="tab-pane fade"
              id="password"
              role="tabpanel"
              aria-labelledby="password-tab"
            >
              <h3 class="mb-4">Password Settings</h3>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Old password</label>
                    <input type="password" class="form-control" />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>New password</label>
                    <input type="password" class="form-control" />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Confirm new password</label>
                    <input type="password" class="form-control" />
                  </div>
                </div>
              </div>
              <div>
                <button class="btn btn-primary">Update</button>
                <button class="btn btn-light">Cancel</button>
              </div>
            </div>
            <div
              class="tab-pane fade"
              id="security"
              role="tabpanel"
              aria-labelledby="security-tab"
            >
              <h3 class="mb-4">Automation Credentials</h3>

              <table class="table table-bordered">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>API Key</th>
                    <th>Description</th>
                    <th>Delete Key</th>
                  </tr>
                </thead>
                <tbody>
                  {% for credential in credentials_list %}
                  <tr>
                    <td>{{ credential.name|truncatechars:20 }}</td>
                    <td>{{ credential.api_key|truncatechars:20 }}</td>
                    <td>{{ credential.description|truncatechars:20 }}</td>
                    <td>
                      <form
                        method="post"
                        class="form_for_delete_button"
                        action="settings"
                      >
                        {% csrf_token %}
                        <input
                          type="hidden"
                          name="credential_id"
                          value="{{ credential.id }}"
                        />
                        <button
                          type="button"
                          class="btn btn-danger btn-sm delete-button"
                          data-toggle="modal"
                          data-target="#deleteModal{{ credential.id }}"
                        >
                          <i class="fa fa-trash"></i> Delete
                        </button>
                      </form>

                      <!-- Delete confirmation modal -->
                      <div
                        class="modal fade"
                        id="deleteModal{{ credential.id }}"
                        tabindex="-1"
                        role="dialog"
                        aria-labelledby="deleteModalLabel"
                        aria-hidden="true"
                      >
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="deleteModalLabel">
                                Delete API Key
                              </h5>
                              <button
                                type="button"
                                class="close"
                                data-dismiss="modal"
                                aria-label="Close"
                              >
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body">
                              <p>Are you sure you want to delete?</p>
                            </div>
                            <div class="modal-footer">
                              <form
                                method="post"
                                action="settings"
                                class="form_for_delete_button"
                              >
                                {% csrf_token %}
                                <input
                                  type="hidden"
                                  name="credential_id"
                                  value="{{ credential.id }}"
                                />
                                <input
                                  type="submit"
                                  name="delete_key"
                                  value="Yes"
                                  class="btn btn-danger"
                                />
                                <button
                                  type="button"
                                  class="btn btn-secondary"
                                  data-dismiss="modal"
                                >
                                  No
                                </button>
                              </form>
                            </div>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>

                  {% empty %}
                  <tr>
                    <td colspan="3">No credentials found.</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>

              <form method="POST" action="settings" class="credentials-form">
                {% csrf_token %}

                <div class="row">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="name">Name:</label>
                      <input
                        type="text"
                        name="name"
                        required=""
                        class="form-control"
                      />
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="api_key">API Key:</label>
                      <input
                        type="text"
                        name="api_key"
                        required=""
                        class="form-control"
                      />
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="description">Description:</label>
                      <input
                        type="text"
                        name="description"
                        required=""
                        class="form-control"
                      />
                    </div>
                  </div>

                  <div class="col-md-12 text-center">
                    <input
                      type="submit"
                      name="add_key"
                      value="Add Key"
                      class="btn btn-primary"
                    />
                    <button
                      class="btn btn-light"
                      onclick="clearFields()"
                      type="button"
                    >
                      Cancel
                    </button>
                    <script>
                      function clearFields() {
                        document.getElementsByName("name")[0].value = "";
                        document.getElementsByName("description")[0].value = "";
                        document.getElementsByName("api_key")[0].value = "";
                      }
                    </script>
                  </div>
                </div>
              </form>
            </div>
            <div
              class="tab-pane fade"
              id="application"
              role="tabpanel"
              aria-labelledby="application-tab"
            >
              <h3 class="mb-4">Application Settings</h3>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        value=""
                        id="app-check"
                      />
                      <label class="form-check-label" for="app-check">
                        App check
                      </label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        value=""
                        id="defaultCheck2"
                      />
                      <label class="form-check-label" for="defaultCheck2">
                        Lorem ipsum dolor sit.
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div>
                <button class="btn btn-primary">Update</button>
                <button class="btn btn-light">Cancel</button>
              </div>
            </div>
            <div
              class="tab-pane fade"
              id="notification"
              role="tabpanel"
              aria-labelledby="notification-tab"
            >
              <h3 class="mb-4">Notification Settings</h3>
              <div class="form-group">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value=""
                    id="notification1"
                  />
                  <label class="form-check-label" for="notification1">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit.
                    Dolorum accusantium accusamus, neque cupiditate quis
                  </label>
                </div>
              </div>
              <div class="form-group">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value=""
                    id="notification2"
                  />
                  <label class="form-check-label" for="notification2">
                    hic nesciunt repellat perferendis voluptatum totam porro
                    eligendi.
                  </label>
                </div>
              </div>
              <div class="form-group">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value=""
                    id="notification3"
                  />
                  <label class="form-check-label" for="notification3">
                    commodi fugiat molestiae tempora corporis. Sed dignissimos
                    suscipit
                  </label>
                </div>
              </div>
              <div>
                <button class="btn btn-primary">Update</button>
                <button class="btn btn-light">Cancel</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  </body>
</html>
